<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Fitness On Campus Track Sharing</title>

    <!-- Load the ArcGIS JavaScript SDK. -->
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.11/esri/css/main.css"
    />

    <!-- Add some (minimal) styling to the website. -->
    <link rel="stylesheet" href="css/main.css" />

    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!--Import materialize.css-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Import nouislider -->
    <link rel="stylesheet" href="extras/noUiSlider/nouislider.css" />
  </head>
  <body>
    <div id="filter" class="section section-filter">
      <div class="row">
        <div id="filter-div" class="input-field col s12 m6">
          <select id="user-id">
            <option value="" disabled selected>Choose User ID</option>
          </select>
          <label>Filter by User ID</label>
        </div>
        <div class="input-field col s12 m3">
          <label>Filter by Duration</label>
          <input id="min-duration" type="number" placeholder="Min Duration" />
        </div>

        <div class="input-field col s12 m3">
          <input id="max-duration" type="number" placeholder="Max Duration" />
        </div>
      </div>

      <div class="row">
        <div id="slider" class="col s12 m6"></div>
      </div>
      <a id="filter-button" class="waves-effect waves-light btn">filter</a>
    </div>
    <!-- The main view where we put the map. -->
    <div class="section section-map" id="viewDiv"></div>

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- JS for materlizecss styling -->
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- nouislider -->
    <script src="extras/noUiSlider/nouislider.js"></script>
    <script src="extras/noUiSlider/nouislider.min.js"></script>

    <script src="https://js.arcgis.com/4.11/"></script>

    <!-- Load the js for the map -->
    <script src="js/main.js"></script>
    <!-- <script src="js/test.js"></script> -->

    <script>
      // initialize select
      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('select');
        var instances = M.FormSelect.init(elems);
      });

      // check whethere minDuration and maxDuration are validate
      var minDuration = document.getElementById('min-duration');
      var maxDuration = document.getElementById('max-duration');
      minDuration.addEventListener(
        'change',
        checkInput(minDuration, maxDuration)
      );
      maxDuration.addEventListener(
        'change',
        checkInput(minDuration, maxDuration)
      );

      function checkInput(val1, val2) {
        if (parseInt(val1.value) > parseInt(val2.value)) {
          M.toast({
            html: 'Invalid Input - min duration larger than max duration'
          });
        }
      }

      var slider = document.getElementById('slider');
      noUiSlider.create(slider, {
        start: [0, 100],
        connect: true,
        step: 1,
        orientation: 'horizontal', // 'horizontal' or 'vertical'
        range: {
          min: 0,
          max: 100
        },
        format: wNumb({
          decimals: 0
        })
      });

      console.log(slider);

      // initialize dropdown
      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.dropdown-trigger');
        var options = {
          alignment: 'right',
          coverTrigger: false
        };
        var instances = M.Dropdown.init(elems, options);
      });
    </script>
  </body>
</html>
